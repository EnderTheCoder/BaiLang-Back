## 一.签名算法
#### 在该项目中除非特殊注明，所有接口均遵循此算法。
##### 关于签名分别有三个参数：
| 参数        | 用途                            |
| :---------:|:--------------------------------|
| sign       | 签名                            |
| app_id     | 与app_key相对应并且与不同数据库相对应|
| timestamp  | 十位精确至秒UNIX时间戳             |
##### 计算签名时先对所有参数名进行字典序排序，然后把值转换为url格式并拼接为txt格式，并在最后加上appkey，然后进行md5计算得到签名并且转为大写。
##### 举例：
```
{
    'key1':'我是一个参数',
    'key2':'我也是一个参数',
    'app_id':1,
    'timestamp':1581952284
}
```
##### 按照字典序排序后如下：
```
{
    'app_id':1,
    'key1':'我是一个参数',
    'key2':'我也是一个参数',
    'timestamp':1581952284
}
```
##### 各个值转换为url格式得到：
```
{
    'app_id':1,
    'key1':'%E6%88%91%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0',
    'key2':'%E6%88%91%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0',
    'timestamp':1581952284
}
```
##### 按照该顺序拼接为txt格式得到：
```
'app_id=1&key1=%E6%88%91%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0&key2=%E6%88%91%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0&timestamp=1581952284'
```
##### 在尾部加入app_key(假定为1q2w3e4r5t)：
```
'app_id=1&key1=%E6%88%91%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0&key2=%E6%88%91%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0&timestamp=1581952284&app_key=1q2w3e4r5t'
```
##### 计算得到md5：
```
'15b97b0ee95141af598ca1888d259d05'
```
##### 转换成大写：
```
'15B97B0EE95141AF598CA1888D259D05'
```
##### 将该值作为参数sign插入到要提交的数据中：
```
//json格式
{
    'app_id':1,
    'key1':'%E6%88%91%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0',
    'key2':'%E6%88%91%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0',
    'timestamp':1581952284,
    'sign':'15B97B0EE95141AF598CA1888D259D05'
}
//txt格式
'app_id=1&key1=%E6%88%91%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0&key2=%E6%88%91%E4%B9%9F%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0&timestamp=1581952284&sign=15B97B0EE95141AF598CA1888D259D05'
```

## 二.登录接口
|属性|值|
|---|---|
|地址|https://api.aiim.ren/Identify.php|
|请求方式|POST|
|是否使用签名|是|
|返回数据类型|application/json|
##### 应有以下参数

|参数名   |用途                       |
|--------|--------------------------|
|type    |此处必须为login             |
|id      |UID/邮箱/手机号，后端会自动识别|
|password|密码                       |
##### 如果登录成功会返回状态码100，若失败请见上文中其他状态码
## 三. 图形验证码接口
|属性|值|
|---|---|
|地址|https://api.aiim.ren/Captcha.php|
|请求方式|POST|
|是否使用签名|否|
|返回数据类型|image/jpeg|
## 四.注册接口
|属性|值|
|---|---|
|地址|https://api.aiim.ren/Identify.php|
|请求方式|POST|
|是否使用签名|是|
|返回数据类型|application/json|
##### 注册接口分为两部分，要按照先后顺序进行
##### 第一步进行手机验证，使用下面的参数来请求验证码短信
|参数      |用途                |
|---------|--------------------|
|type     |此处必须为phone_verify|
|captcha  |用户输入的图形验证码    |
|phone    |用户输入的手机号       |
|nick_name|用户输入的昵称         |
##### 第二步验证用户是否收到手机验证码，如果验证成功将在数据库中创建账号并发送验证邮件，但并不激活，当用户点击邮箱中的验证链接之后才会激活该账号
|参数        |用途             |
|-----------|----------------|
|type       |此处必须为register|
|phone      |用户输入的手机号   |
|sms_captcha|用户输入的短信验证码|
|email      |用户输入的邮箱     |
|nick_name  |用户输入的昵称     |
|password   |用户输入的密码     |
##### 两个接口的正常返回代码都应为100，如不是100请查阅返回值部分
## 五.MySQL接口
|属性|值|
|---|---|
|地址|https://api.aiim.ren/MySQL_API.php|
|请求方式|POST|
|是否使用签名|是|
|返回数据类型|application/json|
##### 使用以下参数进行请求
|参数|用途|
|---|---|
|sql|sql语句|
|params|sql语句中绑定的参数（可选）|
##### 需要注意的是，为了防止sql注入，如果sql语句中含有用户输入，应使用第二个参数params进行参数绑定，示例如下：
```$xslt
{
    "sql":"SELECT Uid FROM Users WHERE Email = ? AND MobilePhone = ?",
    "params":
    {
        "1":"f199145523@sina.com",
        "2":"18112341234"
    }
}
```
##### 在上述示例中，两个有用户输入的地方换成了?，而对应的数据在params中从下标1开始与sql语句中的?一一对应
##### 正常返回代码为为100，并附有查询结果，如代码非100请查阅返回值部分
## 六.短信SMS接口
|属性|值|
|---|---|
|地址|https://api.aiim.ren/SMS_API.php|
|请求方式|POST|
|是否使用签名|是|
|返回数据类型|application/json|
##### 使用以下参数进行请求：
|参数|用途|
|---|---|
|phone|目标手机号码|
|msg|欲发送的消息|
##### 正常返回代码为100，并附有短信服务商提供的json返回值，如代码非100请查阅返回值部分
## 七.邮件接口
|属性|值|
|---|---|
|地址|https://api.aiim.ren/Email_API.php|
|请求方式|POST|
|是否使用签名|是|
|返回数据类型|application/json|
##### 使用以下参数进行请求：
|参数|用途|
|---|---|
|email|目标邮件地址|
|head|邮件标题|
|body|邮件内容|
